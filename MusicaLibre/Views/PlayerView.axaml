<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:MusicaLibre.ViewModels"
             xmlns:ctrl="clr-namespace:MusicaLibre.Controls"
             xmlns:conv="clr-namespace:MusicaLibre.Converters"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="MusicaLibre.Views.PlayerView"
             x:DataType="vm:PlayerViewModel">
    <UserControl.Resources>
        <conv:InverseBooleanConverter x:Key="InverseBool"/>
        <conv:NullToBooleanConverter x:Key="NullToBoolean"/>
    </UserControl.Resources>
    <Border Background="#222" Height="48" HorizontalAlignment="Stretch">
        <Grid ColumnDefinitions="Auto, Auto, *, Auto, Auto" 
            VerticalAlignment="Center" Height="48">
            <Grid Grid.Column="0">
                <Menu DataContext="{Binding MainVM}">
                    <MenuItem >
                        <MenuItem.Header>
                            <Border Padding="4">
                            <Path Data="m 17.782288,16.395756 c 0,-0.414 -0.336,-0.75 -0.75,-0.75 H 7.5322878 c -0.414,0 -0.75,0.336 -0.75,0.75 0,0.414 0.336,0.75 0.75,0.75 h 9.5000002 c 0.414,0 0.75,-0.336 0.75,-0.75 z m 0,-5 c 0,-0.414 -0.336,-0.75 -0.75,-0.75 H 7.5322878 c -0.414,0 -0.75,0.336 -0.75,0.75 0,0.414 0.336,0.75 0.75,0.75 h 9.5000002 c 0.414,0 0.75,-0.336 0.75,-0.75 z m 0,-4.9999995 c 0,-0.414 -0.336,-0.75 -0.75,-0.75 H 7.5322878 c -0.414,0 -0.75,0.336 -0.75,0.75 0,0.414 0.336,0.75 0.75,0.75 h 9.5000002 c 0.414,0 0.75,-0.336 0.75,-0.75 z"
                                  Fill="White"
                                  Stretch="Uniform"/>
                            </Border>
                        </MenuItem.Header>
                        <MenuItem Header = "New Library"
                                  Command="{Binding CreateLibraryCommand }"/>
                        <MenuItem Header = "Open Library"
                                  Command="{Binding OpenLibraryCommand}"/>               
                        
                        <MenuItem Header="Library"
                                  DataContext="{Binding Library}"
                                  IsEnabled="{Binding .,  Converter={StaticResource NullToBoolean}}">

                            <MenuItem Header="Manage Custom Orderings"
                                      Command="{Binding ManageCustomOrderingsCommand}" />
                            <MenuItem Header="Batch fix unknown artist Albums"
                                      Command="{Binding FixUnknownArtistAlbumsCommand}"/>
                        </MenuItem>
                        <MenuItem Header="Settings" Command="{Binding EditAppSettingsCommand}"/>
                    </MenuItem>
                </Menu>
            </Grid>
            
            <!-- Fast forward 
<Path Fill="White" Stretch="Uniform"
      Data="m 11.2,327 c 0.262,0.007 0.514,0.106 0.711,0.279 l 23,20.2 c 0.509,0.448 0.509,1.24 0,1.69 l -23,20.2 c -0.727,0.641 -1.87,0.124 -1.87,-0.846 v -40.5 c 8.9e-4,-0.634 0.525,-1.14 1.16,-1.12 z m 17.5,7.5e-4 c -0.633,-0.0186 -1.16,0.489 -1.16,1.12 v 10.9 l 8.36,7.36 c 1.17,1.03 1.17,2.91 0,3.94 l -8.36,7.36 v 10.9 c -10e-4,0.969 1.14,1.49 1.87,0.846 l 23,-20.2 c 0.509,-0.448 0.509,-1.24 0,-1.69 l -23,-20.2 c -0.197,-0.173 -0.449,-0.272 -0.711,-0.279 z"/>
-->
<!-- Rewind
<Path Fill="White" Stretch="Uniform"
      Data="m 149,327 c -0.262,0.007 -0.514,0.106 -0.711,0.279 l -23,20.2 c -0.509,0.448 -0.509,1.24 0,1.69 l 23,20.2 c 0.727,0.641 1.87,0.124 1.87,-0.846 v -40.5 c -8.9e-4,-0.634 -0.525,-1.14 -1.16,-1.12 z m -17.5,7.5e-4 c 0.633,-0.0186 1.16,0.489 1.16,1.12 v 10.9 l -8.36,7.36 c -1.17,1.03 -1.17,2.91 0,3.94 l 8.36,7.36 v 10.9 c 0.001,0.969 -1.14,1.49 -1.87,0.846 l -23,-20.2 c -0.509,-0.448 -0.509,-1.24 0,-1.69 l 23,-20.2 c 0.197,-0.173 0.449,-0.272 0.711,-0.279 z"/>
-->
            
            <!-- Left Controls -->
            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Spacing="16" Margin="8,0">
                <ctrl:IconButton Command="{Binding StopCommand}"
                    IsEnabled="{Binding IsLoaded}"
                    IconData="m 109,398 c -0.828,8e-5 -1.5,0.672 -1.5,1.5 v 39.8 c 8e-5,0.828 0.672,1.5 1.5,1.5 h 39.8 c 0.828,-8e-5 1.5,-0.672 1.5,-1.5 v -39.8 c -8e-5,-0.828 -0.672,-1.5 -1.5,-1.5 z"
                    Width="32" Height="32" Padding="4"/>

                <ctrl:IconButton Command="{Binding SkipBackCommand}"
                    IsEnabled="{Binding IsLoaded}"             
                    IconData="m 305,327 a 2.5,2.5 0 0 1 2.46,2.54 v 15.2 l -1.92,1.69 -0.002,0.002 c -1.17,1.03 -1.17,2.91 0.002,3.94 l 1.92,1.69 v 15.2 a 2.5,2.5 0 1 1 -5,0 v -37.7 a 2.5,2.5 0 0 1 2.54,-2.54 z m 25.2,0.0137 c 0.633,-0.0186 1.16,0.489 1.16,1.12 v 7.67 l -12,10.6 c -1.17,1.03 -1.17,2.91 0,3.94 l 12,10.6 v 7.67 c 10e-4,0.969 -1.14,1.49 -1.87,0.846 l -23,-20.2 c -0.509,-0.448 -0.509,-1.24 0,-1.69 l 23,-20.2 c 0.197,-0.173 0.449,-0.272 0.711,-0.279 z m 13.8,8.9e-4 c -0.262,0.007 -0.514,0.106 -0.711,0.279 l -23,20.2 c -0.509,0.448 -0.509,1.24 0,1.69 l 23,20.2 c 0.727,0.641 1.87,0.124 1.87,-0.846 v -40.5 c -8.9e-4,-0.634 -0.525,-1.14 -1.16,-1.12 z"
                    Width="32" Height="32" Padding="4"/>
                <Panel>
                    <ctrl:IconButton Command = "{Binding PlayToggleCommand}"
                        IsEnabled="{Binding IsLoaded}"
                        IsVisible="{Binding IsPlaying, Converter={StaticResource InverseBool}}"
                        IconData="m 11.2,255 c 0.262,0.007 0.514,0.106 0.711,0.279 l 23,20.2 c 0.509,0.448 0.509,1.24 0,1.69 l -23,20.2 c -0.727,0.641 -1.87,0.124 -1.87,-0.846 v -40.5 c 8.9e-4,-0.634 0.525,-1.14 1.16,-1.12 z"
                        Width="32" Height="32" Padding="4"/>
                    
                    <ctrl:IconButton Command = "{Binding PlayToggleCommand}"
                         IsEnabled="{Binding IsLoaded}"
                         IsVisible="{Binding IsPlaying}"
                         IconData="m 343,255 a 2.5,2.5 0 0 0 -2.46,2.54 v 37.7 a 2.5,2.5 0 1 0 5,0 v -37.7 A 2.5,2.5 0 0 0 343,255 Z m -12.6,0 a 2.5,2.5 0 0 0 -2.46,2.54 v 37.7 a 2.5,2.5 0 1 0 5,0 v -37.7 A 2.5,2.5 0 0 0 330.4,255 Z"
                         Width="32" Height="32" Padding="4"/>
                </Panel>
                <ctrl:IconButton Command="{Binding SkipForward}"
                    IsEnabled="{Binding IsLoaded}"
                    IconData="M 245,327 A 2.5,2.5 0 0 0 242.54,329.54 V 344.74 L 244.46,346.43 C 245.63,347.46 245.63,349.34 244.46,350.37 L 242.54,352.06 V 367.26 A 2.5,2.5 0 1 0 247.54,367.26 V 329.56 A 2.5,2.5 0 0 0 245,327 Z M 219.8,327.013 C 219.167,326.994 218.64,327.501 218.64,328.13 V 335.8 L 230.64,346.4 C 231.81,347.43 231.81,349.31 230.64,350.34 L 218.64,361 V 368.67 C 218.639,369.639 219.779,370.16 220.51,369.516 L 243.51,349.316 C 244.019,348.868 244.019,348.08 243.51,347.59 L 220.51,327.39 C 220.313,327.217 220.061,327.118 219.799,327.111 Z M 206,327.001 C 206.262,327.008 206.514,327.107 206.711,327.284 L 229.711,347.484 C 230.22,347.932 230.22,348.724 229.711,349.214 L 206.711,369.414 C 205.984,370.055 204.844,369.538 204.844,368.448 V 327.948 C 204.845,327.314 205.37,326.801 206,326.779 Z"
                    Width="32" Height="32" Padding="4"/>
            </StackPanel>
            <Grid Grid.Column="2" Height="48">
                <Grid  ColumnDefinitions="*, *, *" VerticalAlignment="Top" Margin="0 4 0 0">
                    <TextBlock Text="{Binding Elapsed}" 
                               HorizontalAlignment="Center" />
                    <TextBlock Grid.Column="1" Text="{Binding Duration}" 
                               HorizontalAlignment="Center"/>
                    <TextBlock Grid.Column="2" Text="{Binding Remaining}"
                               HorizontalAlignment="Center" />
                </Grid>
                <!-- Slider -->
                <ContentControl Height="24" VerticalAlignment="Bottom" Margin="0 0 0 4">
                    <ctrl:SeekSlider  x:Name="PositionSlider" 
                                     Position="{Binding Position}"
                                     IsEnabled="{Binding IsLoaded}"
                                     DragStarted="Slider_DragStarted"
                                     DragCompleted="Slider_DragCompleted"/>
                </ContentControl>
                
            </Grid>
            
            

            <!-- Right Controls -->
            
            <Border Grid.Column="4" Height="32" Width="70" Margin="8">
                <Canvas>
                    <Path Fill="White" Stretch="Uniform" Width="16" Height="16" Canvas.Left="8" Canvas.Top="0"
                          Data="
                    M 53.6,22.6  A 1.8,1.8 0 0 0 52.35,25.68 A 16.7,16.7 0 0 1 52.35,49.28 A 1.8,1.8 0 1 0 54.88,51.82 A 20.3,20.3 0 0 0 54.88,23.12 A 1.8,1.8 0 0 0 53.6,22.58 Z
                    M 44,16  A 1.2,1.2 0 0 0 43.26,16.3 L 30.46,27.3 H 17.76 C 16.76,27.3 15.93,27.8 15.3,28.42 A 3.47,3.47 0 0 0 14.18,30.88 V 43.98 C 14.18,44.99 14.68,45.82 15.3,46.45 
                    A 3.47,3.47 0 0 0 17.76,47.57  H 30.46 L 43.26,58.57 A 1.2,1.2 0 0 0 45.23,57.67 V 17.07 A 1.2,1.2 0 0 0 44,15.88 Z" />
                    <ctrl:VolumeControlSlider Grid.Row="1" Width="70" Height="24" Canvas.Bottom="0" Canvas.Left="0" 
                                              Volume="{Binding Volume, Mode=TwoWay}"/>
                </Canvas>    
            </Border>
            <!--Menu & tools-->

        </Grid>
        
    </Border>
</UserControl>
