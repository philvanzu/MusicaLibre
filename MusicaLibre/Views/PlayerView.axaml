<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:MusicaLibre.ViewModels"
             xmlns:ctrl="clr-namespace:MusicaLibre.Controls"
             xmlns:conv="clr-namespace:MusicaLibre.Converters"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="MusicaLibre.Views.PlayerView"
             x:DataType="vm:PlayerViewModel">
    <UserControl.Resources>
        <conv:InverseBooleanConverter x:Key="InverseBool"/>
        <conv:NullToBooleanConverter x:Key="NullToBoolean"/>
    </UserControl.Resources>
    <Border Background="#222" Height="48" HorizontalAlignment="Stretch">
        <Grid ColumnDefinitions="Auto, Auto, *, Auto, Auto" 
            VerticalAlignment="Center" Height="48">
            <Grid Grid.Column="0">
                <Menu DataContext="{Binding MainVM}">
                    <MenuItem >
                        <MenuItem.Header>
                            <Border Padding="4">
                            <Path Data="m 17.782288,16.395756 c 0,-0.414 -0.336,-0.75 -0.75,-0.75 H 7.5322878 c -0.414,0 -0.75,0.336 -0.75,0.75 0,0.414 0.336,0.75 0.75,0.75 h 9.5000002 c 0.414,0 0.75,-0.336 0.75,-0.75 z m 0,-5 c 0,-0.414 -0.336,-0.75 -0.75,-0.75 H 7.5322878 c -0.414,0 -0.75,0.336 -0.75,0.75 0,0.414 0.336,0.75 0.75,0.75 h 9.5000002 c 0.414,0 0.75,-0.336 0.75,-0.75 z m 0,-4.9999995 c 0,-0.414 -0.336,-0.75 -0.75,-0.75 H 7.5322878 c -0.414,0 -0.75,0.336 -0.75,0.75 0,0.414 0.336,0.75 0.75,0.75 h 9.5000002 c 0.414,0 0.75,-0.336 0.75,-0.75 z"
                                  Fill="White"
                                  Stretch="Uniform"/>
                            </Border>
                        </MenuItem.Header>
                        <MenuItem Header = "New Library"
                                  Command="{Binding CreateLibraryCommand }"/>
                        <MenuItem Header = "Open Library"
                                  Command="{Binding OpenLibraryCommand}"/>               
                        
                        <MenuItem Header="Library"
                                  DataContext="{Binding Library}"
                                  IsEnabled="{Binding .,  Converter={StaticResource NullToBoolean}}">

                            <MenuItem Header="Manage Custom Orderings"
                                      Command="{Binding ManageCustomOrderingsCommand}" />
                        </MenuItem>
                    </MenuItem>

                </Menu>
            </Grid>
            
            <!-- Fast forward 
<Path Fill="White" Stretch="Uniform"
      Data="m 11.2,327 c 0.262,0.007 0.514,0.106 0.711,0.279 l 23,20.2 c 0.509,0.448 0.509,1.24 0,1.69 l -23,20.2 c -0.727,0.641 -1.87,0.124 -1.87,-0.846 v -40.5 c 8.9e-4,-0.634 0.525,-1.14 1.16,-1.12 z m 17.5,7.5e-4 c -0.633,-0.0186 -1.16,0.489 -1.16,1.12 v 10.9 l 8.36,7.36 c 1.17,1.03 1.17,2.91 0,3.94 l -8.36,7.36 v 10.9 c -10e-4,0.969 1.14,1.49 1.87,0.846 l 23,-20.2 c 0.509,-0.448 0.509,-1.24 0,-1.69 l -23,-20.2 c -0.197,-0.173 -0.449,-0.272 -0.711,-0.279 z"/>
-->
<!-- Rewind
<Path Fill="White" Stretch="Uniform"
      Data="m 149,327 c -0.262,0.007 -0.514,0.106 -0.711,0.279 l -23,20.2 c -0.509,0.448 -0.509,1.24 0,1.69 l 23,20.2 c 0.727,0.641 1.87,0.124 1.87,-0.846 v -40.5 c -8.9e-4,-0.634 -0.525,-1.14 -1.16,-1.12 z m -17.5,7.5e-4 c 0.633,-0.0186 1.16,0.489 1.16,1.12 v 10.9 l -8.36,7.36 c -1.17,1.03 -1.17,2.91 0,3.94 l 8.36,7.36 v 10.9 c 0.001,0.969 -1.14,1.49 -1.87,0.846 l -23,-20.2 c -0.509,-0.448 -0.509,-1.24 0,-1.69 l 23,-20.2 c 0.197,-0.173 0.449,-0.272 0.711,-0.279 z"/>
-->
            
            <!-- Left Controls -->
            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Spacing="16" Margin="8,0">
                <ctrl:IconButton Command="{Binding StopCommand}"
                    IsEnabled="{Binding IsLoaded}"
                    IconData="m 109,398 c -0.828,8e-5 -1.5,0.672 -1.5,1.5 v 39.8 c 8e-5,0.828 0.672,1.5 1.5,1.5 h 39.8 c 0.828,-8e-5 1.5,-0.672 1.5,-1.5 v -39.8 c -8e-5,-0.828 -0.672,-1.5 -1.5,-1.5 z"
                    Width="32" Height="32" Padding="4"/>

                <ctrl:IconButton Command="{Binding SkipBackCommand}"
                    IsEnabled="{Binding IsLoaded}"             
                    IconData="m 305,327 a 2.5,2.5 0 0 1 2.46,2.54 v 15.2 l -1.92,1.69 -0.002,0.002 c -1.17,1.03 -1.17,2.91 0.002,3.94 l 1.92,1.69 v 15.2 a 2.5,2.5 0 1 1 -5,0 v -37.7 a 2.5,2.5 0 0 1 2.54,-2.54 z m 25.2,0.0137 c 0.633,-0.0186 1.16,0.489 1.16,1.12 v 7.67 l -12,10.6 c -1.17,1.03 -1.17,2.91 0,3.94 l 12,10.6 v 7.67 c 10e-4,0.969 -1.14,1.49 -1.87,0.846 l -23,-20.2 c -0.509,-0.448 -0.509,-1.24 0,-1.69 l 23,-20.2 c 0.197,-0.173 0.449,-0.272 0.711,-0.279 z m 13.8,8.9e-4 c -0.262,0.007 -0.514,0.106 -0.711,0.279 l -23,20.2 c -0.509,0.448 -0.509,1.24 0,1.69 l 23,20.2 c 0.727,0.641 1.87,0.124 1.87,-0.846 v -40.5 c -8.9e-4,-0.634 -0.525,-1.14 -1.16,-1.12 z"
                    Width="32" Height="32" Padding="4"/>
                <Panel>
                    <ctrl:IconButton Command = "{Binding PlayToggleCommand}"
                        IsEnabled="{Binding IsLoaded}"
                        IsVisible="{Binding IsPlaying, Converter={StaticResource InverseBool}}"
                        IconData="m 11.2,255 c 0.262,0.007 0.514,0.106 0.711,0.279 l 23,20.2 c 0.509,0.448 0.509,1.24 0,1.69 l -23,20.2 c -0.727,0.641 -1.87,0.124 -1.87,-0.846 v -40.5 c 8.9e-4,-0.634 0.525,-1.14 1.16,-1.12 z"
                        Width="32" Height="32" Padding="4"/>
                    
                    <ctrl:IconButton Command = "{Binding PlayToggleCommand}"
                         IsEnabled="{Binding IsLoaded}"
                         IsVisible="{Binding IsPlaying}"
                         IconData="m 343,255 a 2.5,2.5 0 0 0 -2.46,2.54 v 37.7 a 2.5,2.5 0 1 0 5,0 v -37.7 A 2.5,2.5 0 0 0 343,255 Z m -12.6,0 a 2.5,2.5 0 0 0 -2.46,2.54 v 37.7 a 2.5,2.5 0 1 0 5,0 v -37.7 A 2.5,2.5 0 0 0 330.4,255 Z"
                         Width="32" Height="32" Padding="4"/>
                </Panel>
                <ctrl:IconButton Command="{Binding SkipForward}"
                    IsEnabled="{Binding IsLoaded}"
                    IconData="M 245,327 A 2.5,2.5 0 0 0 242.54,329.54 V 344.74 L 244.46,346.43 C 245.63,347.46 245.63,349.34 244.46,350.37 L 242.54,352.06 V 367.26 A 2.5,2.5 0 1 0 247.54,367.26 V 329.56 A 2.5,2.5 0 0 0 245,327 Z M 219.8,327.013 C 219.167,326.994 218.64,327.501 218.64,328.13 V 335.8 L 230.64,346.4 C 231.81,347.43 231.81,349.31 230.64,350.34 L 218.64,361 V 368.67 C 218.639,369.639 219.779,370.16 220.51,369.516 L 243.51,349.316 C 244.019,348.868 244.019,348.08 243.51,347.59 L 220.51,327.39 C 220.313,327.217 220.061,327.118 219.799,327.111 Z M 206,327.001 C 206.262,327.008 206.514,327.107 206.711,327.284 L 229.711,347.484 C 230.22,347.932 230.22,348.724 229.711,349.214 L 206.711,369.414 C 205.984,370.055 204.844,369.538 204.844,368.448 V 327.948 C 204.845,327.314 205.37,326.801 206,326.779 Z"
                    Width="32" Height="32" Padding="4"/>
            </StackPanel>
            <Grid Grid.Column="2" Height="48">
                <Grid  ColumnDefinitions="*, *, *" VerticalAlignment="Top" Margin="0 4 0 0">
                    <TextBlock Text="{Binding Elapsed}" 
                               HorizontalAlignment="Center" />
                    <TextBlock Grid.Column="1" Text="{Binding Duration}" 
                               HorizontalAlignment="Center"/>
                    <TextBlock Grid.Column="2" Text="{Binding Remaining}"
                               HorizontalAlignment="Center" />
                </Grid>
                <!-- Slider -->
                <ContentControl Height="24" VerticalAlignment="Bottom" Margin="0 0 0 4">
                    <ctrl:SeekSlider  x:Name="PositionSlider" 
                                     Position="{Binding Position}"
                                     IsEnabled="{Binding IsLoaded}"
                                     DragStarted="Slider_DragStarted"
                                     DragCompleted="Slider_DragCompleted"/>
                </ContentControl>
                
            </Grid>
            
            

            <!-- Right Controls -->
            <StackPanel Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center" Spacing="8" Margin="8,0">
                <ctrl:IconButton Command="{Binding ShuffleCommand}"
                    IsEnabled="{Binding IsLoaded}"
                    Width="32" Height="32" Padding="4" 
                    IconData="M 337,402 C 336.779,401.9721 336.554,402.139 336.555,402.395 V 407.345 C 335.375,407.518 334.115,407.754 332.835,408.097 C 330.255,408.786 327.555,409.857 325.355,411.767 C 323.155,413.677 321.545,416.577 321.545,420.097 C 321.545,422.227 320.797,423.497 319.457,424.647 C 318.117,425.807 316.097,426.697 313.957,427.267 C 309.687,428.407 305.247,428.287 305.247,428.287 A 2.5014,2.5014 0 0 0 305.079,433.287 C 305.079,433.287 305.391,433.297 305.94,433.295 C 307.59,433.284 311.37,433.146 315.24,432.117 C 317.82,431.428 320.52,430.357 322.72,428.447 C 324.92,426.537 326.53,423.637 326.53,420.207 C 326.53,418.077 327.278,416.807 328.618,415.647 C 329.958,414.487 331.98,413.597 334.13,413.027 C 334.949,412.809 335.769,412.648 336.569,412.513 V 416.703 C 336.5693,416.925 336.753,417.103 336.975,417.096 C 337.067,417.094 337.156,417.059 337.225,416.998 L 345.295,409.898 C 345.474,409.741 345.474,409.461 345.295,409.304 L 337.225,402.194 C 337.161,402.138 337.087,402.106 337.013,402.096 Z M 305.9,406.9 C 305.351,406.897 305.039,406.908 305.039,406.908 C 301.709,407.02 301.879,412.02 305.047,411.908 C 305.047,411.908 309.487,411.788 313.757,412.908 C 315.887,413.477 317.92,414.367 319.257,415.527 C 319.677,415.89 320.031,416.268 320.327,416.677 C 320.831,414.897 321.707,413.327 322.807,412.017 C 322.713,411.929 322.624,411.832 322.528,411.748 C 320.328,409.838 317.628,408.767 315.047,408.097 C 311.167,407.067 307.387,406.92 305.747,406.908 Z M 336,423.2 C 335.778,423.193 335.594,423.37 335.594,423.593 V 427.783 C 334.795,427.648 333.975,427.488 333.155,427.273 C 331.025,426.704 328.992,425.813 327.657,424.647 C 327.238,424.284 326.883,423.906 326.587,423.497 C 326.083,425.277 325.207,426.847 324.107,428.157 C 324.202,428.246 324.291,428.343 324.093,428.428 C 326.293,430.338 328.993,431.408 331.567,432.097 C 332.857,432.44 334.12,432.676 335.295,432.848 V 437.798 C 335.2945,438.138 335.695,438.32 335.95,438.095 L 344.02,430.985 C 344.199,430.828 344.199,430.548 344.02,430.391 L 335.95,423.291 C 335.881,423.23 335.792,423.195 335.7,423.193 Z"/>
                    
                <ctrl:IconButton
                    Command="{Binding RepeatCommand}"
                    IsEnabled="{Binding IsLoaded}"
                    Width="32" Height="32" Padding="4" Background="Transparent"
                    IconData="M 187,471 C 186.778,470.993 186.594,471.172 186.594,471.395 V 476.005 H 170.194 C 166.084,476.005 162.694,479.395 162.694,483.505 V 494.905 C 162.694,498.995 166.084,502.395 170.194,502.395 H 177.924 C 177.969,502.394 178.013,502.392 178.059,502.389 L 176.839,501.319 C 176.001,500.582 176.001,499.209 176.839,498.479 L 177.924,497.409 C 177.879,497.406 177.823,497.404 177.787,497.404 H 170.057 C 168.627,497.404 167.558,496.334 167.558,494.905 V 483.505 C 167.558,482.075 168.627,480.905 170.057,480.905 H 186.457 V 485.505 C 186.456,485.845 186.857,486.027 187.112,485.802 L 195.182,478.702 C 195.361,478.545 195.361,478.265 195.182,478.108 L 187.112,470.998 C 187.043,470.937 186.954,470.902 186.862,470.905 Z M 195.23,476 C 195.184,476.0007 195.138,476.003 195.091,476.006 L 196.311,477.076 C 197.149,477.813 197.149,479.186 196.311,479.916 L 195.091,480.986 C 195.138,480.989 195.187,480.99 195.23,480.994 H 202.97 C 204.4,480.994 205.47,482.064 205.47,483.505 V 494.905 C 205.47,496.335 204.4,497.405 202.97,497.405 H 186.57 V 492.295 C 186.5697,492.073 186.385,491.894 186.163,491.899 C 186.071,491.902 185.984,491.938 185.915,491.998 L 177.845,499.108 C 177.666,499.265 177.666,499.545 177.845,499.702 L 185.915,506.802 C 186.17,507.027 186.57,506.845 186.57,506.505 V 501.905 H 202.97 C 207.08,501.905 210.47,498.515 210.47,494.905 V 483.505 C 210.47,479.395 207.08,476.005 202.97,476.005 Z"/>
                    
                

            </StackPanel>
            <Border Grid.Column="4" Height="32" Width="70" Margin="8">
                <Canvas>
                    <Path Fill="White" Stretch="Uniform" Width="16" Height="16" Canvas.Left="8" Canvas.Top="0"
                          Data="
                    M 53.6,22.6  A 1.8,1.8 0 0 0 52.35,25.68 A 16.7,16.7 0 0 1 52.35,49.28 A 1.8,1.8 0 1 0 54.88,51.82 A 20.3,20.3 0 0 0 54.88,23.12 A 1.8,1.8 0 0 0 53.6,22.58 Z
                    M 44,16  A 1.2,1.2 0 0 0 43.26,16.3 L 30.46,27.3 H 17.76 C 16.76,27.3 15.93,27.8 15.3,28.42 A 3.47,3.47 0 0 0 14.18,30.88 V 43.98 C 14.18,44.99 14.68,45.82 15.3,46.45 
                    A 3.47,3.47 0 0 0 17.76,47.57  H 30.46 L 43.26,58.57 A 1.2,1.2 0 0 0 45.23,57.67 V 17.07 A 1.2,1.2 0 0 0 44,15.88 Z" />
                    <ctrl:VolumeControlSlider Grid.Row="1" Width="70" Height="24" Canvas.Bottom="0" Canvas.Left="0" 
                                              Volume="{Binding Volume, Mode=TwoWay}"/>
                </Canvas>    
            </Border>
            <!--Menu & tools-->

        </Grid>
        
    </Border>
</UserControl>
